(function(_ds){var window=this;var H0=async function(a){var b=await _ds.v(),c,d=Number(null!==(c=a.getAttribute("threshold"))&&void 0!==c?c:void 0);c=isNaN(d)?.8:d;d=a.hasAttribute("unfiltered");a.j.h();try{await b.intersectionEnterForElement(a,c)}catch(k){a.h=!0}if(d){b="devsite-analytics-observation-unfiltered";var e=F0(a)}else{b="devsite-analytics-observation";var f,g,h;c=null!==(f=G0(a,"event-category"))&&void 0!==f?f:"Site-Wide Custom Events";f=null!==(g=G0(a,"event-action"))&&void 0!==g?g:"viewed";null!==(h=G0(a,"event-label"))&&
void 0!==h?g=h:0<a.children.length?(h=a.children[0],g=h.className,h=h.tagName,g=`Element: ${g?g:h}`):g="Element: (text node)";h=G0(a,"event-value");d=void 0;null!==h&&void 0!==h&&(d=null!==(e=Number(h))&&void 0!==e?e:void 0);e={category:c,action:f,label:g,value:d}}null!==e&&a.dispatchEvent(new CustomEvent(b,{detail:e,bubbles:!0}))},F0=function(a){function b(f,g){g=_ds.th(f.name.slice(g.length));c[g]=f.value}const c={},d=[],e=[];if(a.hasAttributes())for(let f=0;f<a.attributes.length;++f){const g=a.attributes[f];
g.specified&&(g.name.startsWith("event-data-")?d.push(g):g.name.startsWith("fallback-event-data-")&&e.push(g))}for(const f of d)b(f,"event-data-");if(a.h)for(const f of e)b(f,"fallback-event-data-");return 0===Object.keys(c).length?(console.error('DevsiteVisibilityAnalytics element configured incorrectly for unfiltered events; specify "event-data-" attributes.'),null):{eventData:JSON.stringify(c)}},G0=function(a,b){var c;let d=a.getAttribute(b);a.h&&(d=null!==(c=a.getAttribute(`${"fallback-"}${b}`))&&
void 0!==c?c:d);return d},I0=class extends _ds.D{constructor(){super(...arguments);this.j=new _ds.vk;this.h=!1}connectedCallback(){H0(this)}whenReady(){return this.j.promise}};try{window.customElements.define("devsite-visibility-analytics",I0)}catch(a){console.warn("devsite.app.customElement.DevsiteVisibilityAnalytics",a)};})(_ds_www);
